<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/templates/modeloSistema.xhtml">

	<ui:define name="menu">
		<ui:include src="/includes/menuPrincipal.xhtml"></ui:include>
	</ui:define>
	<ui:define name="conteudo">
		<h:form id="formularioClientesLista">
			<p:dataTable widgetVar="tblClientes" id="tabelaClientes" value="#{MBCliente.clientes}" var="cliente"
				emptyMessage="Nenhum cliente foi encotrado." paginator="true"
				rows="10" filteredValue="#{MBCliente.clientesFiltrados}">
				<f:facet name="header"> Lista de Clientes</f:facet>
				
				<p:column headerText="Código" sortBy="#{cliente.id_cliente}"
					filterBy="#{cliente.id_cliente}">
					<h:outputText value="#{cliente.id_cliente}" />
				</p:column>
				<p:column headerText="Nome" sortBy="#{cliente.nome}"
					filterBy="#{cliente.nome}">
					<h:outputText value="#{cliente.nome}" />
				</p:column>
				<p:column headerText="Email" sortBy="#{cliente.email}"
					filterBy="#{cliente.email}">
					<h:outputText value="#{cliente.email}" />
				</p:column>
				<p:column headerText="Telefone" sortBy="#{cliente.telefone}"
					filterBy="#{cliente.telefone}">
					<h:outputText value="#{cliente.telefone}" />
				</p:column>
				
				<p:column headerText="Opções">
					<p:commandButton icon="ui-icon-pencil" oncomplete="PF('dlgClienteEditar').show();"
						update=":formularioClienteEditar:painelClienteEditar">
						<f:setPropertyActionListener value="#{cliente}" target="#{MBCliente.cliente}"></f:setPropertyActionListener>
					</p:commandButton>
				
					<p:commandButton icon="ui-icon-trash" oncomplete="PF('dlgClienteExcluir').show();"
						update=":formularioClienteExcluir:painelClienteExcluir">
						<f:setPropertyActionListener value="#{cliente}" target="#{MBCliente.cliente}"></f:setPropertyActionListener>
					</p:commandButton>
				</p:column>
				
				
				<f:facet name="footer"> 
					<p:commandButton value="Novo" 
					actionListener="#{MBCliente.prepararNovoCliente}" 
					oncomplete="PF('dlgClienteNovo').show();"
					update=":formularioClienteNovo:painelClienteNovo"/>
				</f:facet>
				
			</p:dataTable>
		</h:form>
			
		<p:dialog widgetVar="dlgClienteNovo" closable="false" 
				  draggable="false" resizable="false"
				  header="Cliente - Novo" modal="true"
				  appendTo="@(body)"> <!-- //o dialog e a pesquisa são objetos distintos! -->
			<h:form id="formularioClienteNovo">
				<h:panelGrid id="painelClienteNovo" columns="2">
					<p:outputLabel value="Nome"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.nome}"/>
					<p:outputLabel value="Email"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.email}"/>
					<p:outputLabel value="Telefone"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.telefone}"/>
				</h:panelGrid>	
				<h:panelGrid>
					<p:commandButton value="Salvar" actionListener="#{MBCliente.novo}" 
									oncomplete="PF('dlgClienteNovo').hide(); tblClientes.clearFilters();"
									update=":formularioClientesLista:tabelaClientes :msgGlobal"/>
					<p:commandButton value="Cancelar" onclick="PF('dlgClienteNovo').hide();"/>
				</h:panelGrid>
			</h:form>	
		</p:dialog>
		
		<p:dialog widgetVar="dlgClienteEditar" closable="false" 
				  draggable="false" resizable="false"
				  header="Cliente - Editar" modal="true"
				  appendTo="@(body)"> <!-- //o dialog e a pesquisa são objetos distintos! -->
			<h:form id="formularioClienteEditar">
				<h:panelGrid id="painelClienteEditar" columns="2">
					<p:outputLabel value="Código"/>
					<h:outputText value="#{MBCliente.cliente.id_cliente}"/>
					<p:outputLabel value="Nome"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.nome}"/>
					<p:outputLabel value="Email"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.email}"/>
					<p:outputLabel value="Telefone"/>
					<p:inputText size="40" maxlength="255" value="#{MBCliente.cliente.telefone}"/>
				</h:panelGrid>	
				<h:panelGrid>
					<p:commandButton value="Editar" actionListener="#{MBCliente.editar}" 
									oncomplete="PF('dlgClienteEditar').hide(); tblClientes.clearFilters();"
									update=":formularioClientesLista:tabelaClientes :msgGlobal"/>
					<p:commandButton value="Cancelar" onclick="PF('dlgClienteEditar').hide();"/>
				</h:panelGrid>
			</h:form>	
		</p:dialog>
		
		<p:dialog widgetVar="dlgClienteExcluir" closable="false" 
				  draggable="false" resizable="false"
				  header="Cliente - Excluir" modal="true"
				  appendTo="@(body)"> <!-- //o dialog e a pesquisa são objetos distintos! -->
			<h:form id="formularioClienteExcluir">
				<h:panelGrid id="painelClienteExcluir" columns="2">
					<p:outputLabel value="Código"/>
					<h:outputText value="#{MBCliente.cliente.id_cliente}"/>
					<p:outputLabel value="Nome"/>
					<h:outputText value="#{MBCliente.cliente.nome}"/>
					<p:outputLabel value="Email"/>
					<h:outputText value="#{MBCliente.cliente.email}"/>
					<p:outputLabel value="Telefone"/>
					<h:outputText value="#{MBCliente.cliente.telefone}"/>
				</h:panelGrid>	
				<h:panelGrid>
					<p:commandButton value="Excluir" actionListener="#{MBCliente.excluir}" 
									oncomplete="PF('dlgClienteNovo').hide(); tblClientes.clearFilters();"
									update=":formularioClientesLista:tabelaClientes :msgGlobal"/>
					<p:commandButton value="Cancelar" onclick="PF('dlgClienteExcluir').hide();"/>
				</h:panelGrid>
			</h:form>	
		</p:dialog>
	</ui:define>
</ui:composition>















